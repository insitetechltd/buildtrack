# GitHub + EAS Integration Setup Guide

## üéØ **Overview**

This guide explains how to set up automatic deployments from GitHub to EAS, enabling seamless updates to Expo Go.

---

## üìÅ **Files Structure for EAS**

### ‚úÖ **Files TO Commit to GitHub:**

```
BuildTrack/
‚îú‚îÄ‚îÄ .github/workflows/          # GitHub Actions (NEW)
‚îÇ   ‚îî‚îÄ‚îÄ eas-update.yml         # Auto-deployment workflow
‚îú‚îÄ‚îÄ src/                       # Source code
‚îú‚îÄ‚îÄ scripts/                   # Build scripts
‚îú‚îÄ‚îÄ app.json                   # Expo configuration
‚îú‚îÄ‚îÄ eas.json                   # EAS configuration
‚îú‚îÄ‚îÄ package.json               # Dependencies
‚îú‚îÄ‚îÄ babel.config.js           # Babel config
‚îú‚îÄ‚îÄ metro.config.js           # Metro config
‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript config
‚îú‚îÄ‚îÄ .gitignore                # Git ignore rules
‚îú‚îÄ‚îÄ .env.example              # Environment template
‚îî‚îÄ‚îÄ README.md                 # Documentation
```

### ‚ùå **Files NOT to Commit:**

```
BuildTrack/
‚îú‚îÄ‚îÄ node_modules/             # Dependencies (installed during build)
‚îú‚îÄ‚îÄ .expo/                    # Local Expo cache
‚îú‚îÄ‚îÄ ios/                      # Generated by EAS
‚îú‚îÄ‚îÄ android/                  # Generated by EAS
‚îú‚îÄ‚îÄ dist/                     # Build artifacts
‚îú‚îÄ‚îÄ .env                      # Secrets (use GitHub Secrets instead)
‚îú‚îÄ‚îÄ *.tar.gz                  # Large binaries
‚îú‚îÄ‚îÄ *.zip                     # Large binaries
‚îú‚îÄ‚îÄ *.ipa                     # iOS builds
‚îî‚îÄ‚îÄ *.app                     # macOS apps
```

---

## üîß **Setup Steps**

### **Step 1: Get Your Expo Token**

```bash
# Login to EAS
npx eas login

# Get your token
npx eas whoami
```

### **Step 2: Add Token to GitHub Secrets**

1. Go to your GitHub repository
2. Click **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. Click **"New repository secret"**
4. Name: `EXPO_TOKEN`
5. Value: Your Expo token from step 1

### **Step 3: Configure EAS Project**

Your `eas.json` should look like this:

```json
{
  "cli": {
    "version": ">= 16.23.1",
    "appVersionSource": "remote"
  },
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal"
    },
    "expo-go": {
      "distribution": "internal",
      "ios": {
        "simulator": true,
        "buildConfiguration": "Debug",
        "credentialsSource": "local"
      }
    },
    "production": {
      "autoIncrement": true,
      "ios": {
        "credentialsSource": "remote"
      }
    }
  },
  "submit": {
    "production": {}
  }
}
```

### **Step 4: Configure app.json**

Your `app.json` should have:

```json
{
  "expo": {
    "name": "BuildTrack",
    "slug": "buildtrack",
    "version": "1.0.0",
    "runtimeVersion": "1.0.0",
    "extra": {
      "eas": {
        "projectId": "your-project-id"
      }
    },
    "updates": {
      "url": "https://u.expo.dev/your-project-id"
    }
  }
}
```

---

## üöÄ **How It Works**

### **Automatic Flow:**

```
1. Developer pushes code to GitHub main branch
2. GitHub Actions workflow triggers
3. Workflow installs dependencies
4. Workflow publishes to EAS Update
5. Users get update in Expo Go automatically
```

### **Manual Flow (Backup):**

```bash
# Manual publish
npx eas update --branch main --message "Your update message"
```

---

## üì± **Testing in Expo Go**

### **For Development:**

1. **Start development server:**
   ```bash
   npx expo start --tunnel
   ```

2. **Open Expo Go app**
3. **Scan QR code** or enter URL
4. **Pull down to refresh** for latest updates

### **For Production Updates:**

1. **Push to GitHub main branch**
2. **Wait for GitHub Actions** to complete (~2-3 minutes)
3. **Open Expo Go app**
4. **Pull down to refresh** - update will be downloaded automatically

---

## üîç **Monitoring Deployments**

### **GitHub Actions:**
- Go to your repository ‚Üí **Actions** tab
- See workflow runs and status
- View logs for debugging

### **EAS Dashboard:**
- Visit: https://expo.dev/accounts/tristankoo/projects/buildtrack/updates
- See all published updates
- Monitor update distribution

---

## üõ†Ô∏è **Troubleshooting**

### **Common Issues:**

1. **"EXPO_TOKEN not set"**
   - Add token to GitHub Secrets
   - Make sure it's named exactly `EXPO_TOKEN`

2. **"Build failed"**
   - Check GitHub Actions logs
   - Verify all dependencies are in `package.json`
   - Ensure `eas.json` is valid

3. **"Update not showing in Expo Go"**
   - Pull down to refresh in Expo Go
   - Check EAS dashboard for update status
   - Verify runtime version matches

### **Debug Commands:**

```bash
# Check EAS login
npx eas whoami

# Test update locally
npx eas update --branch main --message "Test update"

# Check project status
npx eas project:info
```

---

## üìä **Benefits of This Setup**

### ‚úÖ **Automatic Updates:**
- No manual `eas update` commands needed
- Updates happen on every push to main
- Consistent deployment process

### ‚úÖ **Version Control:**
- All code changes tracked in Git
- Rollback capability
- Team collaboration

### ‚úÖ **Monitoring:**
- GitHub Actions logs
- EAS dashboard visibility
- Update distribution tracking

### ‚úÖ **Security:**
- Tokens stored in GitHub Secrets
- No credentials in code
- Secure deployment pipeline

---

## üéØ **Next Steps**

1. **Commit the GitHub Actions workflow** to your repository
2. **Add your EXPO_TOKEN** to GitHub Secrets
3. **Push to main branch** to trigger first automatic update
4. **Test in Expo Go** to verify updates work
5. **Monitor GitHub Actions** for successful deployments

---

## üìû **Support**

If you encounter issues:

1. **Check GitHub Actions logs** for error details
2. **Verify EAS project configuration**
3. **Test manual update** as fallback
4. **Check Expo documentation** for latest changes

**EAS Documentation:** https://docs.expo.dev/eas/
**GitHub Actions:** https://docs.github.com/en/actions
